<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8">
<link rel="stylesheet" href="xxxx.css" type="text/css">

<title>データ発見隊 (1) - アクセスパタンの活用</title>

<h1>データ発見隊 (1) - アクセスパタンの活用</h1>

今回から「データ発見隊」と題して、様々なデータやアルゴリズムの
活用に関する様々な話題を連載させていただきます。
今回は、ファイルやWebページのアクセスパタンの活用について
考えたいと思います。

<h2>ファイルの属性</h2>

計算機上ではあらゆる種類のデータがファイルやデータベースに
格納されています。

計算機ファイルには様々なデータがごちゃまぜに入っていますが、
UnixやWindowsのファイルシステムは、
ファイルのサイズ・作成時刻・アクセス時刻のような
限られた情報しか保存していませんから、
これら以外の属性を簡単に調べたり利用したりすることができません。

例えばRuby on Railsでサイトを構築する場合、
HTMLファイル / プログラムファイル / ライブラリ /
各種設定ファイル / データベース / ログファイル / など、
様々なファイルをまとめて管理しなければなりません。
また自動的に生成されるソースファイルと
ユーザが自力で作成するソースファイルが混在するので、
適切なバージョン管理やバックアップを行なうことが簡単ではありません。

<p>
作成時刻やパーミションのような一般的なファイル属性以外に、
以下のような属性でファイルを区別できると便利なことがあると思われます。

<ul>
<li>利用する頻度<br>
沢山使うのか/少しだけ使うのか
<li>重要度<br>
貴重なデータか/どこにでもあるのか
<li>利用のパタン<br>
一時的に使うのか/長年にわたり連続的に使うのか
<li>作成パタン<br>
編集を行なうのか/参照のみ行なうのか
<li>来歴<br>
ダウンロードしたのか/自分で作成したのか
</ul>

ファイルの使われ方や重要度などが簡単にわからないということは
考えてみると不思議なことです。
どこにでもあるサンプルプログラムなのか
苦労して作った大事なプログラムなのか区別がつかないのは悲しいですし、
長年にわたり編集されてきた文書と
拙速に作られた文書では重みが違ってほしいものです。
様々なファイルの属性をうまく活用すると、
重要なファイルを優先的にバックアップしたり、
自分が撮った写真だけを抽出したり、
出先で必要になりそうなファイルをまとめておいたりすることが
簡単にできるようになるでしょう。

<h2>アクセスパタンを調べてみる</h2>

UnixやWindowsのファイルシステムでは、
ファイルの大きさ、ファイル生成時刻、
最終アクセス時刻、最終変更時刻などは記録されていますが、
ファイルが誰にどのようにアクセスされたかという
履歴情報は記録されません。
そのような情報を利用したい場合は
特別な方法で管理する必要があります。

私はメモや予定表のような個人的な情報をすべてWikiで管理しており、
編集を行なうたびに別ファイルとしてセーブするようにしているので、
セーブされているファイルをリストすることによって
編集履歴を知ることができます。

<p>
以下の図は私のWikiページのタイトルと更新履歴を視覚化したものです。
バーコードのようなグラフの横軸は時刻を示しており、
黒くなっているところでファイルが更新されたことを示しています。

<blockquote>
<img src="http://gyazo.com/d4784e43a370696e289b194ed4554fc7.png">
</blockquote>

タイトルだけの場合はどのページも同じように見えてしまいますが、
アクセスパタンを見ると、
「Git」のページをひと月ほど前に集中的に編集したこと /
URL記録システムについて最近考えていること /
長年にわたり「TODO」ページが更新されていること /
などが一目瞭然です。
単純なブックマーク的なページは編集が少ないので白いままになっています。
少なくとも自分のメモなどに関しては、
正確な作成時刻/最新更新時刻よりも
いつごろどのようにアクセスしているかという情報が重要だといえそうです。

<p>
ファイルに対してもこのような属性を手軽に利用できれば、
昔よく使ったファイルを検索したり、
人から貰ったファイルと入魂のファイルを区別したりすることが
簡単にできるようになるでしょう。

<h3>アクセスパタンの解析</h3>

世の中の複雑な事象の多くは「冪乗測」に従うことが知られています[1]。
冪乗測とは、関係を
<!-- http://oku.edu.mie-u.ac.jp/~okumura/blog/-->
<img src="http://chart.apis.google.com/chart?cht=tx&amp;chl=f(x)=ax^k" alt="f(x)=ax^k"/>
という式で表現できるもので、
「文章中でk番目に多く出現する単語の出現頻度は1/kに比例する」という「Zipfの法則」や、
富豪の収入分布、書籍の売上分布など、
様々な統計データが冪乗測に従う冪分布になっていることが知られています。

<!--
ファイルサイズ
<img src="http://gyazo.com/573bdc0378758b5e0622ea498e563e77.png">
-->

冪乗測に従うデータを両対数グラフ上にプロットすると直線になります。
また、両対数グラフ上で直線になる関係は冪乗測に従うことがいえます。
前述のWikiページへのアクセス回数やアクセス時間の間隔などを
プロットすると以下のように直線になり、
分布が冪乗測に従っていることがわかります。

<blockquote>
全ページのアクセス時刻間隔<br>
<img src="http://gyazo.com/5d3a766c8f462b799ee475ac07ba1d91.png" width=300>
</blockquote>

<blockquote>
ページアクセス回数<br>
<img src="http://gyazo.com/893f8059e7ee59e6daadcff8f43aa576.png" width=300>
</blockquote>

一方、個別ページへのアクセス時刻間隔は冪分布にはなっておらず、
ページの特徴に応じてパタンが異なるようです。
アクセスパタンの解析を行なうことにより、
周期的にアクセスするページ/突発的にアクセスするページなどを
自動的に区別することができるでしょう。

<blockquote>
TODOページの修正時刻間隔<br>
<img src="http://gyazo.com/ee307af9bce47004ddd73af67472976e.png" width=300>
</blockquote>

<blockquote>
Gitページの修正時刻間隔<br>
<img src="http://gyazo.com/0bcf74b85179bee87b5462da03bc4fa0.png" width=300>
</blockquote>

<h2>セレクトブクマ</h2>

日常的に多くのユーザからアクセスされているWebページは「重要である」と考えられますし、
一時的にでも多数のユーザからアクセスされるWebページは「人気がある」といえるでしょう。
Webページのアクセスパタンがわかれば
ページの性質をある程度知ることができると思われます。

他人のWebページのアクセス状況を正確に知ることはできませんが、
はてなブックマークやdel.icio.usのような
ソーシャルブックマークサービスの情報を使うと、
Webページがどのようなパタンでアクセスされているかを
だいたい知ることができます。

誰にとっても有用なリファレンス情報などのページは
一定の頻度でブックマークされ続けるでしょうし、
一時的に人気が出たページの場合は
短い期間に集中してブックマークされる可能性が高いと思われます。
Webページが
いつソーシャルブックマークに登録されたかという情報を調べることにより、
そのページがどちらのタイプに近いかを知ることができると考えられます。

<p>
慶應大学の上野大樹氏は、
ソーシャルブックマークへの登録パタンを解析することによって、
一時的に人気のあるページよりも
定番的な有用なページを抽出することができる
「セレクトブクマ」[2]というシステムを提案しています。

下図は「秋葉原事件」に関するページのブックマーク日時を示したものです。
このように、特別な事件などに関連するブックマークは
登録される日時が集中し、その後はブックマークされることがほとんどありません。

<blockquote>
<img src="http://gyazo.com/92307df7d9ef93ace6274ec19ac2c698.png" width=400>
</blockquote>

一方、汎用の情報として有用なページは、
以下のように長期間にわたりブックマークされ続ける傾向があります。

<blockquote>
<img src="http://gyazo.com/fb4887008ac2ce67b989bb300cc54ccf.png" width=400>
</blockquote>

上野氏の実験によれば、
ブックマーク日時パタンの解析によって
長期的にブックマークされているページを抽出することにより、
有用なページを見つけやすくできることが実証されています。

ソーシャルブックマークの登録数やタグが重要であることはよく実感されていますが、
登録のパタンからも有益な情報を抽出できることは興味深いところです。

<h2>まとめ</h2>

GoogleやSpotlightのようなキーワード検索を誰もが利用するようになり、
その有効性も限界も良く知られるようになってきました。
より有効にキーワード検索を行なうため、
情報に「タグ」をつける方法が最近ポピュラーになってきていますが、
人手でタグをつけるのは面倒ですし、
一貫したタグの付加は大きな心理的負担になってしまいます。

検索のための特別な作業を行なわず、
ファイルの属性やアクセス履歴のような暗黙的な情報を
効果的に利用できる検索方法が望まれます。

手持ちのファイルを検索する場合、
「古いファイル」「大きなファイル」のようなファイル属性や、
「昔よく使ったファイル」「大事なファイル」
のようなアクセスパタンなども併用すると、
キーワード検索の限界を越えた効率的な検索が可能になることは間違いありません。
ファイル名も内容もよく覚えていない場合でも
「2年ぐらい前にちょこちょこ編集してたRubyプログラム」
のようなファイルがすぐにみつかるでしょう。

近い将来にUnixやWindowsのファイルシステムの基本機能が大きく
変化することはないでしょうから、
このような検索を行なうためには特別の工夫をする必要がありますが、
ちょっとした手間で検索効率が上がるであれば検討する価値は充分あると思います。

<p>
次回は
ファイル秘密度、ファイルの重要度など、
アクセスパタン以外のファイル属性の活用について考えてみたいと思います。

<h3>参考文献</h3>

[1] 増井俊之.
“なんでもフラクタル",
WIRED VISION Blog,
http://wiredvision.jp/blog/masui/200708/200708030037.html, 2007.

[2] 上野大樹, 安村通晃.
"セレクトブクマ: ソーシャルブックマークの時間情報を用いた情報フィルタリング検索", 
情報処理学会第50回プログラミング・シンポジウム, pp. 9-16, January 2009. 